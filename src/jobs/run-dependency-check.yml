description: >
  Job runs OWASP Dependency Check
executor: default

parameters:
  project_name:
    type: string
    description: "Name used by OWASP Dependency Check"
  version:
    type: string
    default: "6.5.3"
    description: "OWASP Dependency Check Version"
  report_path:
    type: string
    description: "Dependency Report Path"
    default: odc-reports
  root_dir:
    type: string
    description: "Root location of the sources to analyze"
    default: "."

working_directory: ~/repo/<< parameters.root_dir >>

steps:
  - checkout:
      path: ~/repo
  - attach_workspace:
      at: ~/repo
  - run-dependency-check:
      project_name: << parameters.project_name >>
      version: << parameters.version >>
      report_path: << parameters.report_path >>
